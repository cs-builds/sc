<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="theme-color" content="#ffffff" id="theme-color-meta">
<title>Shridhar Group | FlowZint</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Icons -->
<script src="https://unpkg.com/lucide@latest"></script>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
<!-- Noto Sans for Indic Languages -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Kannada:wght@400;700&family=Noto+Sans+Hindi:wght@400;700&family=Noto+Sans+Tamil:wght@400;700&family=Noto+Sans+Telugu:wght@400;700&family=Noto+Sans+Malayalam:wght@400;700&family=Noto+Sans+Bengali:wght@400;700&family=Noto+Sans+Gujarati:wght@400;700&family=Noto+Sans+Gurmukhi:wght@400;700&family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">

<script>
    tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                fontFamily: {
                    sans: ['Google Sans', 'Roboto', 'Noto Sans Kannada', 'Noto Sans Hindi', 'sans-serif'],
                },
                colors: {
                    brand: {
                        blue: '#1a73e8', // GPay Blue
                        dark: '#000000',
                        light: '#ffffff',
                        surface: '#f8f9fa', // GPay Light BG
                    },
                    dark: {
                        bg: '#202124',
                        surface: '#2d2e31',
                        border: '#3c4043'
                    }
                },
                boxShadow: {
                    'gpay': '0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15)',
                    'float': '0 4px 8px 3px rgba(60,64,67,0.15), 0 1px 3px rgba(60,64,67,0.3)',
                    'glow': '0 0 15px rgba(26, 115, 232, 0.3)',
                    'sheet': '0 -4px 20px rgba(0,0,0,0.15)',
                },
                animation: {
                    'fade-in': 'fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards',
                    'slide-up': 'slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards',
                    'pop': 'pop 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
                },
                keyframes: {
                    fadeIn: { from: { opacity: 0 }, to: { opacity: 1 } },
                    slideUp: { from: { transform: 'translateY(20px)', opacity: 0 }, to: { transform: 'translateY(0)', opacity: 1 } },
                    pop: { from: { transform: 'scale(0.95)' }, to: { transform: 'scale(1)' } }
                }
            }
        }
    }
</script>

<style>
    :root {
        --safe-top: env(safe-area-inset-top, 24px);
        --safe-bottom: env(safe-area-inset-bottom, 20px);
        --nav-height: 80px;
    }

    * { -webkit-tap-highlight-color: transparent; scroll-behavior: smooth; outline: none; }
    
    body {
        background-color: #ffffff;
        color: #202124;
        transition: background-color 0.3s, color 0.3s;
        overflow: hidden; 
        height: 100dvh;
        width: 100vw;
    }

    body.dark {
        background-color: #171717;
        color: #e8eaed;
    }

    /* Scrollbar Hiding */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* Page Container */
    .app-view {
        position: absolute; inset: 0;
        display: flex; flex-direction: column;
        overflow-y: auto; overflow-x: hidden;
        padding-top: calc(60px + var(--safe-top));
        padding-bottom: calc(var(--nav-height) + var(--safe-bottom));
        opacity: 0; pointer-events: none; transform: scale(0.98);
        transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .app-view.active {
        opacity: 1; pointer-events: auto; transform: scale(1); z-index: 10;
    }

    /* GPay Card Style */
    .g-card {
        background: #ffffff;
        border-radius: 24px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        border: 1px solid #dadce0;
        overflow: hidden;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .g-card:active { transform: scale(0.98); }
    .dark .g-card { background: #2d2e31; border-color: #3c4043; box-shadow: none; }

    /* Service Card */
    .service-card {
        display: flex; align-items: center; padding: 16px; margin-bottom: 12px;
        background: white; border-radius: 20px; border: 1px solid #f1f3f4;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .dark .service-card { background: #2d2e31; border-color: #3c4043; box-shadow: none; }
    .service-card:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.1); }

    /* Icon Box */
    .icon-box {
        position: relative; width: 56px; height: 56px; border-radius: 18px;
        display: flex; align-items: center; justify-content: center;
        background: #f0f7ff; color: #1a73e8; overflow: hidden;
    }
    .dark .icon-box { background: rgba(26, 115, 232, 0.15); color: #8ab4f8; }
    .icon-box::after {
        content: ''; position: absolute; inset: 0;
        background: radial-gradient(circle, rgba(26, 115, 232, 0.2) 0%, transparent 70%);
        opacity: 0; transition: opacity 0.3s;
    }
    .service-card:hover .icon-box::after { opacity: 1; }
    .service-card:hover .icon-animate { animation: float 2s ease-in-out infinite; }

    /* Auth Modal / Sheet */
    .auth-overlay {
        position: fixed; inset: 0; z-index: 999;
        background: rgba(0,0,0,0.5); backdrop-filter: blur(4px);
        display: flex; align-items: flex-end; justify-content: center;
        opacity: 0; pointer-events: none; transition: opacity 0.3s;
    }
    .auth-overlay.open { opacity: 1; pointer-events: auto; }

    .auth-sheet {
        width: 100%; max-width: 500px;
        background: white; border-radius: 24px 24px 0 0;
        padding: 32px 24px; box-shadow: var(--shadow-sheet);
        transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
        max-height: 85vh; overflow-y: auto;
    }
    .dark .auth-sheet { background: #202124; border-top: 1px solid #3c4043; }
    .auth-overlay.open .auth-sheet { transform: translateY(0); }

    /* Input Fields */
    .auth-input {
        width: 100%; padding: 14px 16px; border-radius: 12px;
        border: 1px solid #dadce0; background: #f8f9fa;
        font-size: 16px; margin-bottom: 16px; transition: border 0.2s;
        color: #202124;
    }
    .dark .auth-input { background: #303134; border-color: #3c4043; color: white; }
    .auth-input:focus { border-color: #1a73e8; outline: none; background: white; }
    .dark .auth-input:focus { background: #202124; }

    /* Detail Page */
    .detail-page {
        position: fixed; inset: 0; background: white; z-index: 200;
        transform: translateX(100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex; flex-direction: column;
    }
    .dark .detail-page { background: #202124; }
    .detail-page.open { transform: translateX(0); }

    /* Bottom Nav */
    .bottom-nav {
        position: fixed; bottom: calc(16px + var(--safe-bottom)); left: 50%; transform: translateX(-50%);
        width: 92%; max-width: 400px; height: 72px; background: rgba(255,255,255,0.85); backdrop-filter: blur(20px);
        border-radius: 36px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); display: flex; align-items: center; justify-content: space-between;
        padding: 0 8px; z-index: 100; border: 1px solid rgba(255,255,255,0.5);
    }
    .dark .bottom-nav { background: rgba(32, 33, 36, 0.85); border-color: rgba(255,255,255,0.05); }

    .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #5f6368; gap: 4px; }
    .dark .nav-item { color: #9aa0a6; }
    .nav-item.active { color: #1a73e8; }
    .dark .nav-item.active { color: #8ab4f8; }

    .nav-indicator {
        height: 32px; width: 56px; border-radius: 16px; display: flex; align-items: center; justify-content: center;
        transition: background 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .nav-item.active .nav-indicator { background: #e8f0fe; }
    .dark .nav-item.active .nav-indicator { background: #394457; }
    .nav-label { font-size: 11px; font-weight: 500; }
    
    /* Dropdown */
    .lang-dropdown {
        position: absolute; top: calc(60px + var(--safe-top)); right: 20px;
        background: white; border-radius: 16px; width: 220px; max-height: 350px;
        overflow-y: auto; box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        z-index: 9999; transform-origin: top right; transform: scale(0); opacity: 0;
        transition: all 0.2s; border: 1px solid #e5e7eb; pointer-events: none;
    }
    .lang-dropdown.open { transform: scale(1); opacity: 1; pointer-events: auto; }
    .dark .lang-dropdown { background: #303134; border-color: #3c4043; }

</style>
</head>
<body class="antialiased">

    <!-- TOP BAR -->
    <div class="fixed top-0 left-0 right-0 h-[calc(60px+var(--safe-top))] pt-[var(--safe-top)] px-4 flex items-center justify-between z-50 bg-white/90 dark:bg-[#171717]/90 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 transition-colors">
        <!-- Dynamic Logo -->
        <div class="flex items-center">
            <div class="h-12 w-auto overflow-hidden">
                <img id="app-logo" src="logow.png" alt="Shridhar Group" class="h-full w-auto object-contain transition-opacity duration-300">
            </div>
        </div>

        <div class="flex items-center gap-2">
            <button onclick="App.toggleTheme()" class="w-10 h-10 rounded-full flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                <i data-lucide="sun-moon" class="w-5 h-5 text-gray-600 dark:text-gray-300"></i>
            </button>
            <button onclick="App.toggleLangMenu()" class="flex items-center gap-2 px-3 py-2 rounded-full bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors border border-gray-100 dark:border-gray-700">
                <i data-lucide="globe" class="w-4 h-4 text-brand-blue"></i>
                <span id="current-lang" class="text-xs font-bold text-gray-700 dark:text-gray-200">EN</span>
                <i data-lucide="chevron-down" class="w-3 h-3 text-gray-500"></i>
            </button>
            <!-- Auth Status Avatar in Header -->
            <button onclick="Auth.handleProfileClick()" class="w-10 h-10 rounded-full overflow-hidden border border-gray-200 dark:border-gray-700 ml-1">
                <img id="header-avatar" src="https://ui-avatars.com/api/?name=Guest&background=f1f3f4&color=5f6368" class="w-full h-full object-cover">
            </button>
        </div>
    </div>

    <!-- LANGUAGE MENU -->
    <div id="lang-menu" class="lang-dropdown no-scrollbar">
        <!-- Injected via JS -->
    </div>

    <!-- VIEWS -->
    
    <!-- 1. HOME -->
    <div id="view-home" class="app-view active no-scrollbar">
        <div class="px-4 space-y-6">
            <div class="mt-4 animate-slide-up">
                <h2 class="text-2xl font-bold dark:text-white"><span data-i18n="welcome">Welcome</span>, <span id="welcome-name">User</span></h2>
                <p class="text-gray-500 dark:text-gray-400 text-sm" data-i18n="dashboard_subtitle">Your digital engineering hub.</p>
            </div>

            <div class="g-card relative h-48 bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 p-6 flex flex-col justify-between text-white shadow-lg animate-pop overflow-hidden group">
                <div class="absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-2xl group-hover:scale-110 transition-transform duration-700"></div>
                <div class="absolute bottom-0 left-0 w-32 h-32 bg-blue-400/20 rounded-full blur-xl"></div>
                <div class="flex justify-between items-start relative z-10">
                    <div class="bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-[10px] font-bold tracking-wider border border-white/20 uppercase" data-i18n="enterprise_sol">Pro Enterprise</div>
                    <i data-lucide="nfc" class="w-6 h-6 opacity-80"></i>
                </div>
                <div class="relative z-10">
                    <div class="text-sm opacity-80 mb-1" data-i18n="project_value">Active Project Value</div>
                    <div class="text-3xl font-bold tracking-tight">₹ 45,00,000</div>
                    <div class="mt-2 flex items-center gap-2 text-xs opacity-70">
                        <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                        Updates Live
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-4 gap-4 animate-slide-up" style="animation-delay: 0.1s;">
                <div onclick="App.nav('pay')" class="flex flex-col items-center gap-2 ripple cursor-pointer group">
                    <div class="w-14 h-14 rounded-2xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-brand-blue dark:text-blue-400 group-hover:scale-105 transition-transform">
                        <i data-lucide="qr-code" class="w-6 h-6"></i>
                    </div>
                    <span class="text-xs font-medium text-gray-700 dark:text-gray-300" data-i18n="scan">Scan</span>
                </div>
                <div onclick="App.nav('services')" class="flex flex-col items-center gap-2 ripple cursor-pointer group">
                    <div class="w-14 h-14 rounded-2xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-brand-blue dark:text-blue-400 group-hover:scale-105 transition-transform">
                        <i data-lucide="layers" class="w-6 h-6"></i>
                    </div>
                    <span class="text-xs font-medium text-gray-700 dark:text-gray-300" data-i18n="services">Services</span>
                </div>
                <div onclick="App.nav('projects')" class="flex flex-col items-center gap-2 ripple cursor-pointer group">
                    <div class="w-14 h-14 rounded-2xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-brand-blue dark:text-blue-400 group-hover:scale-105 transition-transform">
                        <i data-lucide="briefcase" class="w-6 h-6"></i>
                    </div>
                    <span class="text-xs font-medium text-gray-700 dark:text-gray-300" data-i18n="projects">Projects</span>
                </div>
                <div onclick="App.whatsapp()" class="flex flex-col items-center gap-2 ripple cursor-pointer group">
                    <div class="w-14 h-14 rounded-2xl bg-green-50 dark:bg-green-900/20 flex items-center justify-center text-green-600 dark:text-green-400 group-hover:scale-105 transition-transform">
                        <i data-lucide="message-circle" class="w-6 h-6"></i>
                    </div>
                    <span class="text-xs font-medium text-gray-700 dark:text-gray-300" data-i18n="chat">Chat</span>
                </div>
            </div>

            <div class="animate-slide-up" style="animation-delay: 0.2s;">
                <div class="flex justify-between items-end mb-4">
                    <h3 class="font-bold text-lg dark:text-white" data-i18n="featured">Featured Services</h3>
                    <button onclick="App.nav('services')" class="text-xs font-bold text-brand-blue uppercase tracking-wide">View All</button>
                </div>
                <div class="space-y-3" id="featured-list"></div>
            </div>
        </div>
    </div>

    <!-- 2. SERVICES -->
    <div id="view-services" class="app-view no-scrollbar">
        <div class="px-4">
            <h2 class="text-2xl font-bold mb-2 dark:text-white" data-i18n="our_services">Our Services</h2>
            <p class="text-sm text-gray-500 mb-6" data-i18n="services_subtitle">Professional solutions tailored for you.</p>
            <div id="services-grid" class="flex flex-col pb-20"></div>
        </div>
    </div>

    <!-- 3. PAY -->
    <div id="view-pay" class="app-view no-scrollbar">
        <div class="px-4 space-y-6">
            <h2 class="text-2xl font-bold dark:text-white">FlowZint Pay</h2>
            <div class="g-card p-6 bg-white dark:bg-[#2d2e31]">
                <p class="text-sm text-gray-500 dark:text-gray-400 font-medium tracking-wide">TOTAL BALANCE</p>
                <h1 class="text-4xl font-bold my-2 dark:text-white">₹ 8,40,200.00</h1>
                <div class="flex gap-3 mt-6">
                    <button class="flex-1 py-3 bg-brand-blue text-white rounded-full font-bold text-sm shadow-md ripple hover:bg-blue-700">Add Money</button>
                    <button class="flex-1 py-3 border border-gray-300 dark:border-gray-600 rounded-full font-bold text-sm dark:text-white ripple">Transfer</button>
                </div>
            </div>
            <div>
                <h3 class="font-bold text-lg mb-4 dark:text-white" data-i18n="transactions">Recent Transactions</h3>
                <div class="space-y-4">
                    <div class="flex items-center gap-4 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl">
                        <div class="w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-600 font-bold">A</div>
                        <div class="flex-1">
                            <h4 class="font-bold dark:text-white text-sm">AWS Infrastructure</h4>
                            <p class="text-xs text-gray-500">Today, 10:23 AM</p>
                        </div>
                        <span class="font-bold text-red-600 text-sm">- ₹12,400</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 4. PROJECTS -->
    <div id="view-projects" class="app-view no-scrollbar">
        <div class="px-4">
            <h2 class="text-2xl font-bold mb-2 dark:text-white" data-i18n="case_studies">Case Studies</h2>
            <div id="projects-list" class="space-y-6 pb-20"></div>
        </div>
    </div>

    <!-- 5. PROFILE (PROTECTED) -->
    <div id="view-profile" class="app-view no-scrollbar">
        <div class="px-4 pb-20">
            <div class="text-center py-6">
                <div class="relative w-24 h-24 mx-auto">
                    <div class="w-24 h-24 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 p-1">
                        <img id="profile-img-lg" src="" class="w-full h-full rounded-full object-cover border-4 border-white dark:border-[#202124]">
                    </div>
                    <div class="absolute bottom-1 right-1 w-6 h-6 bg-green-500 border-2 border-white dark:border-[#202124] rounded-full"></div>
                </div>
                <h2 id="profile-name-lg" class="text-xl font-bold mt-4 dark:text-white">User</h2>
                <p id="profile-email-lg" class="text-sm text-gray-500">user@example.com</p>
                <div class="mt-2 inline-flex items-center gap-1 px-3 py-1 bg-brand-blue/10 text-brand-blue rounded-full text-xs font-bold">
                    <i data-lucide="shield-check" class="w-3 h-3"></i> Verified Account
                </div>
            </div>

            <!-- Settings -->
            <div class="space-y-4">
                <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider ml-2">Preferences</h3>
                <div class="g-card overflow-hidden">
                    <button onclick="App.toggleTheme()" class="w-full p-4 flex items-center justify-between border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center"><i data-lucide="moon" class="w-4 h-4 text-gray-600 dark:text-gray-300"></i></div>
                            <span class="font-medium dark:text-gray-200 text-sm" data-i18n="dark_mode">Dark Mode</span>
                        </div>
                    </button>
                    <button onclick="App.toggleLangMenu()" class="w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center"><i data-lucide="globe" class="w-4 h-4 text-gray-600 dark:text-gray-300"></i></div>
                            <span class="font-medium dark:text-gray-200 text-sm" data-i18n="language">Language</span>
                        </div>
                    </button>
                </div>

                <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider ml-2">Support</h3>
                <div class="g-card overflow-hidden">
                    <button onclick="App.whatsapp()" class="w-full p-4 flex items-center justify-between border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center"><i data-lucide="headset" class="w-4 h-4 text-gray-600 dark:text-gray-300"></i></div>
                            <span class="font-medium dark:text-gray-200 text-sm" data-i18n="support">Help & Support</span>
                        </div>
                    </button>
                </div>
                
                <button onclick="Auth.logout()" class="w-full py-3 mt-4 text-red-500 font-bold text-sm bg-red-50 dark:bg-red-900/20 rounded-xl hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors">
                    Sign Out
                </button>
            </div>
        </div>
    </div>

    <!-- AUTH OVERLAY -->
    <div id="auth-overlay" class="auth-overlay">
        <div class="auth-sheet" id="auth-sheet">
            <!-- Close Handle -->
            <div class="flex justify-center mb-6">
                <div class="w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"></div>
            </div>

            <!-- LOGIN FORM -->
            <div id="form-login">
                <h2 class="text-2xl font-bold mb-2 dark:text-white">Welcome Back</h2>
                <p class="text-sm text-gray-500 mb-6">Sign in to access your dashboard.</p>
                
                <input type="email" id="login-email" class="auth-input" placeholder="Email Address">
                <input type="password" id="login-pass" class="auth-input" placeholder="Password">
                
                <button onclick="Auth.login()" class="w-full py-3.5 bg-brand-blue text-white rounded-xl font-bold text-lg shadow-lg mb-4 hover:bg-blue-700 transition-colors">Sign In</button>
                
                <p class="text-center text-sm text-gray-500">
                    New user? <button onclick="Auth.switchMode('signup')" class="text-brand-blue font-bold">Create Account</button>
                </p>
                <button onclick="Auth.close()" class="w-full mt-4 text-gray-400 text-xs font-medium uppercase tracking-wider">Cancel</button>
            </div>

            <!-- SIGNUP FORM -->
            <div id="form-signup" class="hidden">
                <h2 class="text-2xl font-bold mb-2 dark:text-white">Create Account</h2>
                <p class="text-sm text-gray-500 mb-6">Fill in your details to get started.</p>
                
                <input type="text" id="signup-name" class="auth-input" placeholder="Full Name">
                <input type="email" id="signup-email" class="auth-input" placeholder="Email Address">
                <input type="password" id="signup-pass" class="auth-input" placeholder="Password (Min 8 chars)">
                
                <div id="signup-error" class="text-red-500 text-xs font-bold mb-4 hidden"></div>

                <button onclick="Auth.signup()" class="w-full py-3.5 bg-green-600 text-white rounded-xl font-bold text-lg shadow-lg mb-4 hover:bg-green-700 transition-colors">Create Account</button>
                
                <p class="text-center text-sm text-gray-500">
                    Have an account? <button onclick="Auth.switchMode('login')" class="text-brand-blue font-bold">Sign In</button>
                </p>
                <button onclick="Auth.close()" class="w-full mt-4 text-gray-400 text-xs font-medium uppercase tracking-wider">Cancel</button>
            </div>
        </div>
    </div>

    <!-- SERVICE DETAIL -->
    <div id="service-detail" class="detail-page">
        <div class="h-[calc(60px+var(--safe-top))] pt-[var(--safe-top)] px-4 flex items-center gap-4 border-b border-gray-100 dark:border-gray-800 dark:bg-[#202124]">
            <button onclick="App.closeDetail()" class="w-10 h-10 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center justify-center">
                <i data-lucide="arrow-left" class="w-6 h-6 dark:text-white"></i>
            </button>
            <h2 class="font-bold text-lg dark:text-white" id="sd-title"></h2>
        </div>
        <div class="flex-1 overflow-y-auto p-6 pb-32">
            <div class="w-20 h-20 rounded-3xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-brand-blue mb-6" id="sd-icon-container"></div>
            <h3 class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-2" data-i18n="description">Description</h3>
            <p id="sd-desc" class="text-lg text-gray-800 dark:text-gray-200 leading-relaxed mb-8 font-medium"></p>
            <div class="g-card p-5 mb-6 dark:bg-[#2d2e31]">
                <div class="flex justify-between items-center mb-4 pb-4 border-b border-gray-100 dark:border-gray-700">
                    <span class="text-gray-500 text-sm">Estimated Cost</span>
                    <span class="font-bold text-brand-blue" id="sd-price"></span>
                </div>
                 <div class="flex justify-between items-center">
                    <span class="text-gray-500 text-sm">Typical Timeline</span>
                    <span class="font-bold dark:text-white" id="sd-time"></span>
                </div>
            </div>
            <h3 class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-4" data-i18n="technologies">Technologies Stack</h3>
            <div id="sd-tech" class="flex flex-wrap gap-2"></div>
        </div>
        <div class="p-4 border-t border-gray-100 dark:border-gray-800 pb-[calc(16px+var(--safe-bottom))] bg-white dark:bg-[#202124]">
            <button onclick="App.whatsapp()" class="w-full py-4 rounded-full bg-brand-blue text-white font-bold text-lg shadow-lg active:scale-95 transition-transform flex items-center justify-center gap-2">
                <i data-lucide="message-circle" class="w-5 h-5"></i>
                <span data-i18n="chat_expert">Chat with Expert</span>
            </button>
        </div>
    </div>

    <!-- BOTTOM NAV -->
    <nav class="bottom-nav">
        <button onclick="App.nav('home')" class="nav-item active" id="nav-home">
            <div class="nav-indicator"><i data-lucide="home" class="w-6 h-6"></i></div>
            <span class="nav-label" data-i18n="nav_home">Home</span>
        </button>
        <button onclick="App.nav('services')" class="nav-item" id="nav-services">
            <div class="nav-indicator"><i data-lucide="grid" class="w-6 h-6"></i></div>
            <span class="nav-label" data-i18n="nav_services">Services</span>
        </button>
        <button onclick="App.nav('pay')" class="nav-item" id="nav-pay">
            <div class="nav-indicator"><i data-lucide="wallet" class="w-6 h-6"></i></div>
            <span class="nav-label" data-i18n="nav_pay">Pay</span>
        </button>
        <button onclick="App.nav('projects')" class="nav-item" id="nav-projects">
            <div class="nav-indicator"><i data-lucide="briefcase" class="w-6 h-6"></i></div>
            <span class="nav-label" data-i18n="nav_projects">Work</span>
        </button>
        <button onclick="Auth.handleProfileClick()" class="nav-item" id="nav-profile">
            <div class="nav-indicator"><i data-lucide="user" class="w-6 h-6"></i></div>
            <span class="nav-label" data-i18n="nav_profile">Profile</span>
        </button>
    </nav>

    <!-- TOAST (Bottom Positioned) -->
    <div id="toast" class="fixed bottom-24 left-1/2 -translate-x-1/2 bg-gray-900/95 backdrop-blur text-white px-6 py-3 rounded-full shadow-2xl z-[9999] opacity-0 pointer-events-none transition-all duration-300 transform translate-y-4 flex items-center gap-2 border border-gray-800">
        <i data-lucide="info" class="w-4 h-4 text-blue-400"></i>
        <span id="toast-msg" class="text-sm font-medium">Notification</span>
    </div>

<script>
    // --- AUTH MODULE (PRODUCTION GRADE) ---
    const Auth = (() => {
        let users = JSON.parse(localStorage.getItem('fz_users')) || [];
        let session = JSON.parse(localStorage.getItem('fz_session')) || null;

        const init = () => {
            updateUI();
        };

        const updateUI = () => {
            const avatar = document.getElementById('header-avatar');
            const welcomeName = document.getElementById('welcome-name');
            
            if (session) {
                // Logged In
                const avatarUrl = `https://ui-avatars.com/api/?name=${encodeURIComponent(session.name)}&background=1a73e8&color=fff&bold=true`;
                avatar.src = avatarUrl;
                document.getElementById('profile-img-lg').src = avatarUrl;
                document.getElementById('profile-name-lg').innerText = session.name;
                document.getElementById('profile-email-lg').innerText = session.email;
                welcomeName.innerText = session.name.split(' ')[0];
                
                // Update Nav Icon style for logged in state
                document.getElementById('nav-profile').classList.add('text-brand-blue');
            } else {
                // Guest
                avatar.src = "https://ui-avatars.com/api/?name=Guest&background=f1f3f4&color=5f6368";
                welcomeName.innerText = "Guest";
                document.getElementById('nav-profile').classList.remove('text-brand-blue');
            }
        };

        const handleProfileClick = () => {
            if (session) {
                App.nav('profile');
            } else {
                open();
            }
        };

        const open = () => {
            document.getElementById('auth-overlay').classList.add('open');
            // Reset to login view
            switchMode('login');
        };

        const close = () => {
            document.getElementById('auth-overlay').classList.remove('open');
            // Clear inputs
            document.querySelectorAll('.auth-input').forEach(i => i.value = '');
            document.getElementById('signup-error').classList.add('hidden');
        };

        const switchMode = (mode) => {
            document.getElementById('form-login').style.display = mode === 'login' ? 'block' : 'none';
            document.getElementById('form-signup').style.display = mode === 'signup' ? 'block' : 'none';
        };

        const signup = () => {
            const name = document.getElementById('signup-name').value.trim();
            const email = document.getElementById('signup-email').value.trim().toLowerCase();
            const pass = document.getElementById('signup-pass').value;
            const errorEl = document.getElementById('signup-error');

            // Validation
            if (!name || !email || !pass) {
                showError("All fields are required."); return;
            }
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                showError("Invalid email format."); return;
            }
            if (pass.length < 8) {
                showError("Password must be at least 8 characters."); return;
            }
            // Check Duplicate
            if (users.some(u => u.email === email)) {
                showError("Email already registered. Please Sign In."); return;
            }

            // Create User
            const newUser = { id: Date.now(), name, email, pass };
            users.push(newUser);
            localStorage.setItem('fz_users', JSON.stringify(users));

            // Auto Login
            session = newUser;
            localStorage.setItem('fz_session', JSON.stringify(session));
            
            updateUI();
            close();
            App.showToast("Account Created Successfully!");
            App.nav('profile');
        };

        const login = () => {
            const email = document.getElementById('login-email').value.trim().toLowerCase();
            const pass = document.getElementById('login-pass').value;

            const user = users.find(u => u.email === email && u.pass === pass);

            if (user) {
                session = user;
                localStorage.setItem('fz_session', JSON.stringify(session));
                updateUI();
                close();
                App.showToast("Welcome Back!");
                App.nav('profile');
            } else {
                App.showToast("Invalid credentials");
            }
        };

        const logout = () => {
            session = null;
            localStorage.removeItem('fz_session');
            updateUI();
            App.nav('home');
            App.showToast("Logged Out Successfully");
        };

        const showError = (msg) => {
            const el = document.getElementById('signup-error');
            el.innerText = msg;
            el.classList.remove('hidden');
        };

        return { init, handleProfileClick, open, close, switchMode, signup, login, logout };
    })();

    // --- MAIN APP ---
    const App = (() => {
        const SERVICES = [
            { id: 1, title: "Enterprise Software", desc: "Basic to Advance Development. Scalable ERP, CRM, and SaaS platforms.", price: "Custom Quote", time: "4-12 Weeks", icon: "monitor-smartphone", tech: ["Java", ".NET", "Python", "SQL"] },
            { id: 2, title: "Mobile Application", desc: "Custom Native and Cross-platform development. iOS & Android.", price: "₹50k - ₹5L+", time: "4-8 Weeks", icon: "smartphone", tech: ["Flutter", "React Native", "Swift", "Kotlin"] },
            { id: 3, title: "Web, Hosting & Cloud", desc: "Modern websites, secure hosting solutions, and scalable cloud infrastructure.", price: "₹20k - ₹2L", time: "2-4 Weeks", icon: "cloud", tech: ["React", "AWS", "Node.js", "Hosting"] },
            { id: 4, title: "E-Commerce Solutions", desc: "Full-featured online stores, marketplace solutions, and payment gateways.", price: "₹40k - ₹3L", time: "3-6 Weeks", icon: "shopping-cart", tech: ["Shopify", "WooCommerce", "MERN Stack"] },
            { id: 5, title: "Brand Identity", desc: "Corporate assets, logo design, branding kits, and visual identity strategies.", price: "₹10k - ₹1L", time: "1-2 Weeks", icon: "palette", tech: ["Adobe Suite", "Figma", "Design"] },
            { id: 6, title: "IT Consulting", desc: "Technology strategy, digital transformation consulting, and roadmap planning.", price: "Consultation", time: "Ongoing", icon: "briefcase", tech: ["Strategy", "Audit", "Roadmap"] }
        ];

        const PROJECTS = [
            { name: "NeoBank FinTech", type: "Web Application", status: "Live", tech: "React + Node", desc: "A full-stack banking dashboard processing ₹10Cr+ monthly volume.", image_color: "from-purple-500 to-indigo-600" },
            { name: "QuickDelivery", type: "Mobile App", status: "In Progress", tech: "Flutter", desc: "Hyperlocal delivery app with real-time tracking and route optimization.", image_color: "from-orange-400 to-red-500" },
            { name: "LegalAI Bot", type: "SaaS Platform", status: "Beta", tech: "Python + GPT-4", desc: "Automated legal document analysis tool for law firms.", image_color: "from-emerald-500 to-teal-600" },
            { name: "Crypto Exchange", type: "Web3", status: "Concept", tech: "Solidity", desc: "Decentralized exchange interface with wallet integration.", image_color: "from-gray-700 to-black" }
        ];

        const LANGUAGES = [
            { code: 'en', name: 'English', native: 'English' },
            { code: 'kn', name: 'Kannada', native: 'ಕನ್ನಡ' },
            { code: 'hi', name: 'Hindi', native: 'हिंदी' },
            { code: 'ta', name: 'Tamil', native: 'தமிழ்' },
            { code: 'te', name: 'Telugu', native: 'తెలుగు' },
            { code: 'ml', name: 'Malayalam', native: 'മലയാളം' },
            { code: 'mr', name: 'Marathi', native: 'मराठी' },
            { code: 'gu', name: 'Gujarati', native: 'ગુજરાતી' },
            { code: 'bn', name: 'Bengali', native: 'বাংলা' },
            { code: 'pa', name: 'Punjabi', native: 'ਪੰਜਾਬੀ' },
            { code: 'ur', name: 'Urdu', native: 'اردو' },
            { code: 'ar', name: 'Arabic', native: 'العربية' },
            { code: 'es', name: 'Spanish', native: 'Español' },
            { code: 'fr', name: 'French', native: 'Français' },
            { code: 'de', name: 'German', native: 'Deutsch' },
            { code: 'ja', name: 'Japanese', native: '日本語' },
            { code: 'zh', name: 'Chinese', native: '中文' },
            { code: 'ru', name: 'Russian', native: 'Русский' }
        ];

        // FULL TRANSLATION DICTIONARY FOR ALL 18 LANGUAGES
        const TRANSLATIONS = {
            'en': { welcome: 'Welcome', dashboard_subtitle: 'Your digital engineering hub.', services: 'Services', projects: 'Projects', chat: 'Chat', scan: 'Scan', featured: 'Featured Services', nav_home: 'Home', nav_services: 'Services', nav_projects: 'Work', nav_profile: 'Profile', nav_pay: 'Pay', our_services: 'Our Services', services_subtitle: 'Professional solutions tailored for you.', case_studies: 'Case Studies', transactions: 'Recent Transactions', project_value: 'Active Project Value', dark_mode: 'Dark Mode', language: 'Language', support: 'Help & Support', description: 'Description', technologies: 'Technologies Stack', chat_expert: 'Chat with Expert', enterprise_sol: 'Pro Enterprise' },
            'kn': { welcome: 'ಸ್ವಾಗತ', dashboard_subtitle: 'ನಿಮ್ಮ ಡಿಜಿಟಲ್ ಎಂಜಿನಿಯರಿಂಗ್ ಕೇಂದ್ರ.', services: 'ಸೇವೆಗಳು', projects: 'ಯೋಜನೆಗಳು', chat: 'ಚಾಟ್', scan: 'ಸ್ಕ್ಯಾನ್', featured: 'ವೈಶಿಷ್ಟ್ಯಗೊಳಿಸಿದ', nav_home: 'ಮುಖಪುಟ', nav_services: 'ಸೇವೆಗಳು', nav_projects: 'ಕೆಲಸ', nav_profile: 'ಪ್ರೊಫೈಲ್', nav_pay: 'ಪಾವತಿ', our_services: 'ನಮ್ಮ ಸೇವೆಗಳು', services_subtitle: 'ನಿಮಗಾಗಿ ವೃತ್ತಿಪರ ಪರಿಹಾರಗಳು.', case_studies: 'ಯಶಸ್ಸಿನ ಕಥೆಗಳು', transactions: 'ವಹಿವಾಟುಗಳು', project_value: 'ಯೋಜನೆಯ ಮೌಲ್ಯ', dark_mode: 'ಡಾರ್ಕ್ ಮೋಡ್', language: 'ಭಾಷೆ', support: 'ಸಹಾಯ', description: 'ವಿವರಣೆ', technologies: 'ತಂತ್ರಜ್ಞಾನಗಳು', chat_expert: 'ತಜ್ಞರೊಂದಿಗೆ ಮಾತನಾಡಿ', enterprise_sol: 'ಉದ್ಯಮ ಪರಿಹಾರಗಳು' },
            'hi': { welcome: 'स्वागत है', dashboard_subtitle: 'आपका डिजिटल इंजीनियरिंग हब।', services: 'सेवाएं', projects: 'प्रोजेक्ट्स', chat: 'चैट', scan: 'स्कैन', featured: 'विशेष सेवाएं', nav_home: 'होम', nav_services: 'सेवाएं', nav_projects: 'काम', nav_profile: 'प्रोफ़ाइल', nav_pay: 'भुगतान', our_services: 'हमारी सेवाएं', services_subtitle: 'आपके लिए पेशेवर समाधान।', case_studies: 'केस स्टडीज', transactions: 'लेनदेन', project_value: 'प्रोजेक्ट मूल्य', dark_mode: 'डार्क मोड', language: 'भाषा', support: 'सहायता', description: 'विवरण', technologies: 'तकनीकी', chat_expert: 'विशेषज्ञ से बात करें', enterprise_sol: 'उद्यम समाधान' },
            'ta': { welcome: 'வணக்கம்', dashboard_subtitle: 'உங்கள் டிஜிட்டல் மையம்.', services: 'சேவைகள்', projects: 'திட்டங்கள்', chat: 'அரட்டை', scan: 'ஸ்கேன்', featured: 'சிறப்பு', nav_home: 'முகப்பு', nav_services: 'சேவைகள்', nav_projects: 'பணி', nav_profile: 'சுயவிவரம்', nav_pay: 'பணம்', our_services: 'எங்கள் சேவைகள்', services_subtitle: 'தொழில்முறை தீர்வுகள்.', case_studies: 'வழக்கு ஆய்வுகள்', transactions: 'பரிவர்த்தனைகள்', project_value: 'திட்ட மதிப்பு', dark_mode: 'இருண்ட முறை', language: 'மொழி', support: 'உதவி', description: 'விளக்கம்', technologies: 'தொழில்நுட்பங்கள்', chat_expert: 'நிபுணருடன் பேசுங்கள்', enterprise_sol: 'நிறுவன தீர்வுகள்' },
            'te': { welcome: 'స్వాగతం', dashboard_subtitle: 'మీ డిజిటల్ హబ్.', services: 'సేవలు', projects: 'ప్రాజెక్టులు', chat: 'చాట్', scan: 'కాన్', featured: 'ఫీచర్ చేయబడింది', nav_home: 'హోమ్', nav_services: 'సేవలు', nav_projects: 'పని', nav_profile: 'ప్రొఫైల్', nav_pay: 'చెల్లింపు', our_services: 'మా సేవలు', services_subtitle: 'వృత్తిపరమైన పరిష్కారాలు.', case_studies: 'కేస్ స్టడీస్', transactions: 'లావాదేవీలు', project_value: 'ప్రాజెక్ట్ విలువ', dark_mode: 'డార్క్ మోడ్', language: 'భాష', support: 'సహాయం', description: 'వివరణ', technologies: 'టెక్నాలజీస్', chat_expert: 'నిపుణుడితో మాట్లాడండి', enterprise_sol: 'ఎంటర్ప్రైజ్ సొల్యూషన్స్' },
            'ml': { welcome: 'സ്വാഗതം', dashboard_subtitle: 'നിങ്ങളുടെ ഡിജിറ്റൽ ഹബ്.', services: 'സേവനങ്ങൾ', projects: 'പദ്ധതികൾ', chat: 'ചാറ്റ്', scan: 'സ്കാൻ', featured: 'ഫീച്ചർ ചെയ്തത്', nav_home: 'ഹോം', nav_services: 'സേവനങ്ങൾ', nav_projects: 'ജോലി', nav_profile: 'പ്രൊഫൈൽ', nav_pay: 'പേ', our_services: 'ഞങ്ങളുടെ സേവനങ്ങൾ', services_subtitle: 'പ്രൊഫഷണൽ പരിഹാരങ്ങൾ.', case_studies: 'കേസ് സ്റ്റഡീസ്', transactions: 'ഇടപാടുകൾ', project_value: 'പദ്ധതി മൂല്യം', dark_mode: 'ഡാർക്ക് മോഡ്', language: 'ഭാഷ', support: 'സഹായം', description: 'വിവരണം', technologies: 'സാങ്കേതികവിദ്യകൾ', chat_expert: 'വിദഗ്ദ്ധനുമായി സംസാരിക്കുക', enterprise_sol: 'എന്റർപ്രൈസ് സൊല്യൂഷൻസ്' },
            'mr': { welcome: 'स्वागत आहे', dashboard_subtitle: 'तुमचे डिजिटल हब.', services: 'सेवा', projects: 'प्रकल्प', chat: 'चॅट', scan: 'स्कॅन', featured: 'वैशिष्ट्यीकृत', nav_home: 'होम', nav_services: 'सेवा', nav_projects: 'काम', nav_profile: 'प्रोफाइल', nav_pay: 'पे', our_services: 'आमच्या सेवा', services_subtitle: 'व्यावसायिक उपाय.', case_studies: 'केस स्टडी', transactions: 'व्यवहार', project_value: 'प्रकल्प मूल्य', dark_mode: 'डार्क मोड', language: 'भाषा', support: 'मदत', description: 'वर्णन', technologies: 'तंत्रज्ञान', chat_expert: 'तज्ञांशी बोला', enterprise_sol: 'एंटरप्राइज सोल्यूशन्स' },
            'gu': { welcome: 'સ્વાગત છે', dashboard_subtitle: 'તમારું ડિજિટલ હબ.', services: 'સેવાઓ', projects: 'પ્રોજેક્ટ્સ', chat: 'ચેટ', scan: 'સ્કેન', featured: 'વૈશિષ્ટ્યપૂર્ણ', nav_home: 'હોમ', nav_services: 'સેવાઓ', nav_projects: 'કાર્ય', nav_profile: 'પ્રોફાઇલ', nav_pay: 'ચુકવણી', our_services: 'અમારી સેવાઓ', services_subtitle: 'વ્યાવસાયિક ઉકેલો.', case_studies: 'કેસ સ્ટડીઝ', transactions: 'વ્યવહારો', project_value: 'પ્રોજેક્ટ મૂલ્ય', dark_mode: 'ડાર્ક મોડ', language: 'ભાષા', support: 'મદદ', description: 'વર્ણન', technologies: 'ટેકનોલોજી', chat_expert: 'નિષ્ણાત સાથે વાત કરો', enterprise_sol: 'એન્ટરપ્રાઇઝ સોલ્યુશન્સ' },
            'bn': { welcome: 'স্বাগতম', dashboard_subtitle: 'আপনার ডিজিটাল হাব।', services: 'পরিষেবা', projects: 'প্রকল্প', chat: 'চ্যাট', scan: 'স্ক্যান', featured: 'বৈশিষ্ট্যযুক্ত', nav_home: 'হোম', nav_services: 'পরিষেবা', nav_projects: 'কাজ', nav_profile: 'প্রোফাইল', nav_pay: 'পে', our_services: 'আমাদের পরিষেবা', services_subtitle: 'পেশাদার সমাধান।', case_studies: 'কেস স্টাডি', transactions: 'লেনদেন', project_value: 'প্রকল্পের মূল্য', dark_mode: 'ডার্ক মোড', language: 'ভাষা', support: 'সাহায্য', description: 'বিবরণ', technologies: 'প্রযুক্তি', chat_expert: 'বিশেষজ্ঞের সাথে কথা বলুন', enterprise_sol: 'এন্টারপ্রাইজ সলিউশন' },
            'pa': { welcome: 'ਜੀ ਆਇਆਂ ਨੂੰ', dashboard_subtitle: 'ਤੁਹਾਡਾ ਡਿਜੀਟਲ ਹੱਬ.', services: 'ਸੇਵਾਵਾਂ', projects: 'ਪ੍ਰੋਜੈਕਟ', chat: 'ਗੱਲਬਾਤ', scan: 'ਸਕੈਨ', featured: 'ਵਿਸ਼ੇਸ਼', nav_home: 'ਘਰ', nav_services: 'ਸੇਵਾਵਾਂ', nav_projects: 'ਕੰਮ', nav_profile: 'ਪ੍ਰੋਫਾਈਲ', nav_pay: 'ਭੁਗਤਾਨ', our_services: 'ਸਾਡੀਆਂ ਸੇਵਾਵਾਂ', services_subtitle: 'ਪੇਸ਼ੇਵਰ ਹੱਲ.', case_studies: 'ਕੇਸ ਸਟੱਡੀਜ਼', transactions: 'ਲੈਣ-ਦੇਣ', project_value: 'ਪ੍ਰੋਜੈਕਟ ਮੁੱਲ', dark_mode: 'ਡਾਰਕ ਮੋਡ', language: 'ਭਾਸ਼ਾ', support: 'ਮਦਦ', description: 'ਵੇਰਵਾ', technologies: 'ਤਕਨਾਲੋਜੀ', chat_expert: 'ਮਾਹਰ ਨਾਲ ਗੱਲ ਕਰੋ', enterprise_sol: 'ਇੰਟਰਪ੍ਰਾਈਜ਼ ਹੱਲ' },
            'ur': { welcome: 'خوش آمدید', dashboard_subtitle: 'آپ کا ڈیجیٹل مرکز', services: 'خدمات', projects: 'منصوبے', chat: 'بات چیت', scan: 'اسکین', featured: 'نمایاں', nav_home: 'ہوم', nav_services: 'خدمات', nav_projects: 'کام', nav_profile: 'پروفائل', nav_pay: 'ادائیگی', our_services: 'ہماری خدمات', services_subtitle: 'پیشہ ورانہ حل', case_studies: 'کیس اسٹڈیز', transactions: 'لین دین', project_value: 'منصوبے کی قیمت', dark_mode: 'ڈارک موڈ', language: 'زبان', support: 'مدد', description: 'تفصیل', technologies: 'ٹیکنالوجیز', chat_expert: 'ماہر سے بات کریں', enterprise_sol: 'انٹرپرائز حل' },
            'ar': { welcome: 'أهلاً بك', dashboard_subtitle: 'محورك الرقمي.', services: 'خدمات', projects: 'مشاريع', chat: 'دردشة', scan: 'مسح', featured: 'متميز', nav_home: 'الرئيسية', nav_services: 'خدمات', nav_projects: 'عمل', nav_profile: 'الملف', nav_pay: 'دفع', our_services: 'خدماتنا', services_subtitle: 'حلول احترافية.', case_studies: 'دراسات حالة', transactions: 'المعاملات', project_value: 'قيمة المشروع', dark_mode: 'الوضع الداكن', language: 'لغة', support: 'مساعدة', description: 'وصف', technologies: 'التقنيات', chat_expert: 'تحدث مع خبير', enterprise_sol: 'حلول المؤسسات' },
            'es': { welcome: 'Bienvenido', dashboard_subtitle: 'Tu centro digital.', services: 'Servicios', projects: 'Proyectos', chat: 'Chat', scan: 'Escanear', featured: 'Destacado', nav_home: 'Inicio', nav_services: 'Servicios', nav_projects: 'Trabajo', nav_profile: 'Perfil', nav_pay: 'Pagar', our_services: 'Nuestros Servicios', services_subtitle: 'Soluciones profesionales.', case_studies: 'Estudios de Caso', transactions: 'Transacciones', project_value: 'Valor del Proyecto', dark_mode: 'Modo Oscuro', language: 'Idioma', support: 'Ayuda', description: 'Descripción', technologies: 'Tecnologías', chat_expert: 'Hablar con Experto', enterprise_sol: 'Soluciones Empresariales' },
            'fr': { welcome: 'Bienvenue', dashboard_subtitle: 'Votre hub numérique.', services: 'Services', projects: 'Projets', chat: 'Chat', scan: 'Scanner', featured: 'En vedette', nav_home: 'Accueil', nav_services: 'Services', nav_projects: 'Travail', nav_profile: 'Profil', nav_pay: 'Payer', our_services: 'Nos Services', services_subtitle: 'Solutions professionnelles.', case_studies: 'Études de Cas', transactions: 'Transactions', project_value: 'Valeur du Projet', dark_mode: 'Mode Sombre', language: 'Langue', support: 'Aide', description: 'Description', technologies: 'Technologies', chat_expert: 'Parler à un Expert', enterprise_sol: 'Solutions d\'Entreprise' },
            'de': { welcome: 'Willkommen', dashboard_subtitle: 'Ihr digitaler Hub.', services: 'Dienste', projects: 'Projekte', chat: 'Chat', scan: 'Scannen', featured: 'Vorgestellt', nav_home: 'Start', nav_services: 'Dienste', nav_projects: 'Arbeit', nav_profile: 'Profil', nav_pay: 'Zahlen', our_services: 'Unsere Dienste', services_subtitle: 'Professionelle Lösungen.', case_studies: 'Fallstudien', transactions: 'Transaktionen', project_value: 'Projektwert', dark_mode: 'Dunkelmodus', language: 'Sprache', support: 'Hilfe', description: 'Beschreibung', technologies: 'Technologien', chat_expert: 'Mit Experten sprechen', enterprise_sol: 'Unternehmenslösungen' },
            'ja': { welcome: 'ようこそ', dashboard_subtitle: 'デジタルハブ。', services: 'サービス', projects: 'プロジェクト', chat: 'チャット', scan: 'スキャン', featured: '注目', nav_home: 'ホーム', nav_services: 'サービス', nav_projects: '仕事', nav_profile: 'プロフィール', nav_pay: '支払い', our_services: '当社のサービス', services_subtitle: 'プロフェッショナルなソリューション。', case_studies: 'ケーススタディ', transactions: '取引', project_value: 'プロジェクト価値', dark_mode: 'ダークモード', language: '言語', support: 'ヘルプ', description: '説明', technologies: '技術', chat_expert: '専門家と話す', enterprise_sol: 'エンタープライズソリューション' },
            'zh': { welcome: '欢迎', dashboard_subtitle: '您的数字中心。', services: '服务', projects: '项目', chat: '聊天', scan: '扫描', featured: '精选', nav_home: '首页', nav_services: '服务', nav_projects: '工作', nav_profile: '简介', nav_pay: '支付', our_services: '我们的服务', services_subtitle: '专业解决方案。', case_studies: '案例研究', transactions: '交易', project_value: '项目价值', dark_mode: '深色模式', language: '语言', support: '帮助', description: '描述', technologies: '技术', chat_expert: '咨询专家', enterprise_sol: '企业解决方案' },
            'ru': { welcome: 'Добро пожаловать', dashboard_subtitle: 'Ваш цифровой хаб.', services: 'Услуги', projects: 'Проекты', chat: 'Чат', scan: 'Скан', featured: 'Избранное', nav_home: 'Главная', nav_services: 'Услуги', nav_projects: 'Работа', nav_profile: 'Профиль', nav_pay: 'Оплата', our_services: 'Наши услуги', services_subtitle: 'Профессиональные решения.', case_studies: 'Кейсы', transactions: 'Транзакции', project_value: 'Стоимость проекта', dark_mode: 'Темный режим', language: 'Язык', support: 'Помощь', description: 'Описание', technologies: 'Технологии', chat_expert: 'Чат с экспертом', enterprise_sol: 'Корпоративные решения' }
        };

        let state = { currentLang: 'en', theme: 'light', backPressCounter: 0 };

        const init = () => {
            Auth.init();
            renderLanguageList();
            renderServices();
            renderProjects();
            lucide.createIcons();
            
            // Back Press Handling
            window.history.pushState({ page: 'home' }, '', '');
            window.addEventListener('popstate', handleBackPress);

            // Theme Load
            const savedTheme = localStorage.getItem('flowzint_theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark');
                state.theme = 'dark';
            }
            updateLogo();

            // Click outside auth modal
            document.getElementById('auth-overlay').addEventListener('click', (e) => {
                if(e.target.id === 'auth-overlay') Auth.close();
            });
        };

        const nav = (viewId) => {
            document.querySelectorAll('.app-view').forEach(el => el.classList.remove('active'));
            document.getElementById(`view-${viewId}`).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            const navBtn = document.getElementById(`nav-${viewId}`);
            if(navBtn) navBtn.classList.add('active');
            window.history.pushState({ page: viewId }, '', '');
            state.backPressCounter = 0;
        };

        const handleBackPress = (e) => {
            // Check overlays first
            if(document.getElementById('service-detail').classList.contains('open')) {
                closeDetail(); 
                window.history.pushState({ page: 'home' }, '', ''); 
                return;
            }
            if(document.getElementById('auth-overlay').classList.contains('open')) {
                Auth.close();
                window.history.pushState({ page: 'home' }, '', '');
                return;
            }

            if (state.backPressCounter === 0) {
                showToast("Press Back again to Exit");
                state.backPressCounter++;
                window.history.pushState({ page: 'home' }, '', '');
                setTimeout(() => { state.backPressCounter = 0; }, 3000);
            } else {
                window.history.back();
            }
        };

        const renderServices = () => {
            const list = document.getElementById('services-grid');
            const featured = document.getElementById('featured-list');
            
            const html = SERVICES.map(s => `
                <div onclick="App.openDetail(${s.id})" class="service-card cursor-pointer group">
                    <div class="icon-box mr-4"><i data-lucide="${s.icon}" class="w-6 h-6 icon-animate relative z-10"></i></div>
                    <div class="flex-1">
                        <h3 class="font-bold text-base dark:text-white group-hover:text-brand-blue transition-colors">${s.title}</h3>
                        <p class="text-xs text-gray-500 line-clamp-1">${s.desc}</p>
                    </div>
                    <div class="flex items-center gap-2">
                         <span class="text-[10px] font-bold bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-gray-500 dark:text-gray-400">VIEW</span>
                        <i data-lucide="chevron-right" class="w-4 h-4 text-gray-300 group-hover:text-brand-blue transition-colors"></i>
                    </div>
                </div>
            `).join('');
            list.innerHTML = html;
            
            featured.innerHTML = SERVICES.slice(0, 3).map(s => `
                <div onclick="App.openDetail(${s.id})" class="flex items-center gap-3 p-3 bg-white dark:bg-[#2d2e31] rounded-2xl border border-gray-100 dark:border-gray-700 shadow-sm cursor-pointer ripple">
                     <div class="w-10 h-10 rounded-full bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-brand-blue"><i data-lucide="${s.icon}" class="w-5 h-5"></i></div>
                    <div class="flex-1"><h4 class="text-sm font-bold dark:text-white">${s.title}</h4></div>
                    <i data-lucide="arrow-right" class="w-4 h-4 text-gray-300"></i>
                </div>
            `).join('');
        };

        const renderProjects = () => {
            document.getElementById('projects-list').innerHTML = PROJECTS.map(p => `
                <div class="g-card overflow-hidden group cursor-pointer hover:shadow-xl transition-all duration-300">
                    <div class="h-32 bg-gradient-to-r ${p.image_color} relative p-4 flex flex-col justify-end text-white">
                        <div class="absolute top-4 right-4 bg-white/20 backdrop-blur px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide border border-white/20">${p.status}</div>
                        <h3 class="text-xl font-bold relative z-10">${p.name}</h3>
                        <p class="text-xs opacity-0 group-hover:opacity-80 transition-opacity duration-300">${p.type}</p>
                    </div>
                    <div class="p-4 bg-white dark:bg-[#2d2e31]">
                        <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-2">${p.desc}</p>
                        <span class="text-xs font-mono text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">${p.tech}</span>
                    </div>
                </div>
            `).join('');
        };

        const renderLanguageList = () => {
            document.getElementById('lang-menu').innerHTML = LANGUAGES.map(l => `
                <div onclick="App.setLang('${l.code}')" class="px-4 py-3 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-50 dark:border-gray-700 last:border-0 transition-colors">
                    <div class="flex items-center gap-3">
                         <span class="text-xs font-bold text-gray-400 w-6 uppercase">${l.code}</span>
                        <div><div class="text-sm font-medium dark:text-white">${l.native}</div></div>
                    </div>
                    ${l.code === state.currentLang ? `<i data-lucide="check" class="w-4 h-4 text-brand-blue"></i>` : ''}
                </div>
            `).join('');
        };

        const toggleTheme = () => {
            document.body.classList.toggle('dark');
            state.theme = state.theme === 'light' ? 'dark' : 'light';
            localStorage.setItem('flowzint_theme', state.theme);
            document.getElementById('theme-color-meta').content = state.theme === 'light' ? '#ffffff' : '#202124';
            updateLogo();
        };

        const updateLogo = () => {
            const logo = document.getElementById('app-logo');
            logo.src = state.theme === 'dark' ? 'logob.png' : 'logow.png';
        };

        const toggleLangMenu = () => document.getElementById('lang-menu').classList.toggle('open');

        const setLang = (code) => {
            state.currentLang = code;
            document.getElementById('current-lang').innerText = code.toUpperCase();
            renderLanguageList();
            lucide.createIcons();
            document.getElementById('lang-menu').classList.remove('open');

            // Translation Update
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                let text = (TRANSLATIONS[code] && TRANSLATIONS[code][key]) || TRANSLATIONS['en'][key];
                if(text) el.innerText = text;
            });
            // NO TOAST HERE (As requested)
        };

        const openDetail = (id) => {
            const s = SERVICES.find(x => x.id === id);
            document.getElementById('sd-title').innerText = s.title;
            document.getElementById('sd-desc').innerText = s.desc;
            document.getElementById('sd-price').innerText = s.price;
            document.getElementById('sd-time').innerText = s.time;
            document.getElementById('sd-icon-container').innerHTML = `<i data-lucide="${s.icon}" class="w-10 h-10"></i>`;
            lucide.createIcons();
            document.getElementById('sd-tech').innerHTML = s.tech.map(t => `<span class="px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-xs font-bold border border-gray-200 dark:border-gray-600">${t}</span>`).join('');
            document.getElementById('service-detail').classList.add('open');
            window.history.pushState({ page: 'detail' }, '', '');
        };

        const closeDetail = () => document.getElementById('service-detail').classList.remove('open');

        const whatsapp = () => {
            window.open(`https://wa.me/917483640694?text=${encodeURIComponent("Hi Shridhar Group, I'm interested in your Enterprise Solutions.")}`, '_blank');
        };

        const showToast = (msg) => {
            const t = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            t.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-4');
            setTimeout(() => {
                t.classList.add('opacity-0', 'pointer-events-none', 'translate-y-4');
            }, 3000);
        };

        return { init, nav, toggleTheme, toggleLangMenu, setLang, openDetail, closeDetail, whatsapp, showToast };
    })();

    window.onload = App.init;
</script>
</body>
</html>
